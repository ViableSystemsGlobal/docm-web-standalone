module.exports = {

"[project]/.next-internal/server/app/api/events/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[project]/src/lib/supabase.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "createServerSupabaseClient": (()=>createServerSupabaseClient)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@supabase/ssr/dist/module/index.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@supabase/ssr/dist/module/createServerClient.js [app-route] (ecmascript)");
;
const createServerSupabaseClient = ()=>{
    const url = ("TURBOPACK compile-time value", "https://ufjfafcfkalaasdhgcbi.supabase.co");
    const key = ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmamZhZmNma2FsYWFzZGhnY2JpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MTQ3MTMsImV4cCI6MjA2MzI5MDcxM30.PzwQAeRUJDK8llZf0awLwgW6j-pAmZPOgz55USsOnyo");
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$ssr$2f$dist$2f$module$2f$createServerClient$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createServerClient"])(url, key, {
        cookies: {
            get () {
                return null;
            },
            set () {
            // No-op for API routes
            },
            remove () {
            // No-op for API routes
            }
        }
    });
};
}}),
"[project]/src/app/api/events/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GET": (()=>GET)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/supabase.ts [app-route] (ecmascript)");
;
;
// Default/fallback events data
const defaultEvents = [
    {
        id: 'default-1',
        name: "Sunday Worship Experience",
        event_date: "2024-01-28T09:00:00",
        location: "Main Sanctuary",
        description: "Join us for an inspiring worship experience with contemporary music and biblical teaching.",
        capacity: 200,
        primary_image: null,
        gradient: "from-blue-800 to-indigo-900",
        type: "worship"
    },
    {
        id: 'default-2',
        name: "Midweek Connection",
        event_date: "2024-01-31T19:00:00",
        location: "Fellowship Hall",
        description: "Dive deeper into God's word through interactive Bible study and fellowship.",
        capacity: 50,
        primary_image: null,
        gradient: "from-purple-800 to-pink-900",
        type: "study"
    },
    {
        id: 'default-3',
        name: "Youth Ignite Night",
        event_date: "2024-02-02T19:00:00",
        location: "Youth Center",
        description: "High-energy youth service with games, worship, and relevant messages for teens.",
        capacity: 100,
        primary_image: null,
        gradient: "from-green-800 to-teal-900",
        type: "youth"
    },
    {
        id: 'default-4',
        name: "Community Outreach",
        event_date: "2024-02-05T10:00:00",
        location: "Community Center",
        description: "Join us as we serve our community with love and compassion through various outreach programs.",
        capacity: 150,
        primary_image: null,
        gradient: "from-orange-800 to-red-900",
        type: "outreach"
    }
];
async function GET(request) {
    try {
        // Environment check - SAME pattern as homepage/navigation
        if ("TURBOPACK compile-time falsy", 0) {
            "TURBOPACK unreachable";
        }
        let supabase;
        try {
            supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createServerSupabaseClient"])();
        } catch (error) {
            console.log('ðŸ”„ EVENTS SOURCE: DEFAULT (Supabase client creation failed)');
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                events: defaultEvents,
                source: 'default',
                message: 'Using default events - Supabase client failed'
            });
        }
        console.log('ðŸ” Attempting to fetch events from database...');
        // Get upcoming events (event_date >= today)
        const today = new Date().toISOString();
        // First, fetch events
        const { data: events, error: eventsError } = await supabase.from('events').select('*').gte('event_date', today).order('event_date', {
            ascending: true
        }).limit(10) // Get max 10 upcoming events
        ;
        console.log('ðŸ“Š Database query result:', {
            events: events,
            error: eventsError,
            eventsLength: events ? events.length : 0
        });
        if (eventsError) {
            console.error('ðŸ”„ EVENTS SOURCE: DEFAULT (Database error):', eventsError.message);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                events: defaultEvents,
                source: 'default',
                message: `Using default events - Database error: ${eventsError.message}`
            });
        }
        if (!events || events.length === 0) {
            console.log('ðŸ”„ EVENTS SOURCE: DEFAULT (No upcoming events found)');
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                events: defaultEvents,
                source: 'default',
                message: 'Using default events - No upcoming events found'
            });
        }
        // Fetch images for these events
        const eventIds = events.map((event)=>event.id);
        const { data: images } = await supabase.from('event_images').select('*').in('event_id', eventIds).order('sort_order', {
            ascending: true
        });
        // Create image map
        const imageMap = new Map();
        if (images && images.length > 0) {
            const imagesByEvent = images.reduce((acc, img)=>{
                if (!acc[img.event_id]) {
                    acc[img.event_id] = [];
                }
                acc[img.event_id].push(img);
                return acc;
            }, {});
            Object.keys(imagesByEvent).forEach((eventId)=>{
                imageMap.set(eventId, imagesByEvent[eventId][0]) // First image as primary
                ;
            });
        }
        // Transform events to frontend format
        const transformedEvents = events.map((event)=>({
                id: event.id,
                name: event.name,
                event_date: event.event_date,
                location: event.location || 'Location TBD',
                description: event.description || 'Join us for this special event.',
                capacity: event.capacity,
                primary_image: imageMap.get(event.id) || null,
                // Add some variety in gradients and types
                gradient: getEventGradient(event.name, event.id),
                type: getEventType(event.name, event.description)
            }));
        console.log('âœ… EVENTS SOURCE: DATABASE (Successfully loaded from CMS)');
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            events: transformedEvents,
            source: 'database',
            message: `Loaded ${transformedEvents.length} upcoming events from database`
        });
    } catch (error) {
        console.error('ðŸ”„ EVENTS SOURCE: DEFAULT (Unexpected error):', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            events: defaultEvents,
            source: 'default',
            message: 'Using default events - Unexpected error'
        });
    }
}
// Helper function to assign gradients based on event characteristics
function getEventGradient(name, id) {
    const gradients = [
        "from-blue-800 to-indigo-900",
        "from-purple-800 to-pink-900",
        "from-green-800 to-teal-900",
        "from-orange-800 to-red-900",
        "from-teal-800 to-cyan-900",
        "from-rose-800 to-pink-900"
    ];
    // Use a simple hash of the id to ensure consistent colors
    const hash = id.split('').reduce((a, b)=>a + b.charCodeAt(0), 0);
    return gradients[hash % gradients.length];
}
// Helper function to categorize events
function getEventType(name, description) {
    const content = (name + ' ' + (description || '')).toLowerCase();
    if (content.includes('worship') || content.includes('service') || content.includes('sunday')) return 'worship';
    if (content.includes('youth') || content.includes('teen') || content.includes('young')) return 'youth';
    if (content.includes('study') || content.includes('bible') || content.includes('prayer')) return 'study';
    if (content.includes('outreach') || content.includes('community') || content.includes('serve')) return 'outreach';
    if (content.includes('conference') || content.includes('seminar') || content.includes('retreat')) return 'conference';
    return 'event' // default
    ;
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__87f16102._.js.map